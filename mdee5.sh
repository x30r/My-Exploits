#!/bin/bash

#I created the script is for one of the web challenge in HTB named mdeefive.
#The script will not help you completing the challenge but rather is a PoC on how flag can be achieved.
#Feature: You can even use proxy which will help you debug the HTTP request sent to the machine.

curl -c cookies.txt http://docker.hackthebox.eu:32151/ | grep "h3>" | awk '{print $6}' > test && tail -c 39 test | cut -b 1-20 | md5sum > tmp && cat tmp | cut -b 1-32 > md5
curl -x http://127.0.0.1:8080 -b cookies.txt -d "hash=`cat md5`" -H "Content-Type: application/x-www-form-urlencoded" -X POST http://docker.hackthebox.eu:32151/ > output
cat output && rm -rf md5 && rm -rf tmp && rm -rf test && rm -rf output && rm -rf cookies.txt
